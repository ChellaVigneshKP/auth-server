<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Account - C-Cloud</title>

    <!-- Tailwind CSS -->
    <link rel="stylesheet" th:href="@{/css/output.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">

    <!-- Your Theme Styles -->
    <link rel="stylesheet" th:href="@{/css/theme.css}">
</head>
<body class="flex flex-col min-h-screen bg-gray-100 text-gray-900">

<!-- Main Content Area -->
<div class="flex-grow flex items-center justify-center p-4">
    <!-- Card -->
    <div class="w-full max-w-md bg-white rounded-xl shadow-lg p-8">
        <!-- Logo -->
        <div class="flex flex-col items-center mb-6">
            <img th:src="@{/images/logo.png}" alt="C-Cloud Logo" class="h-10 w-10 object-contain">
            <span class="mt-2 text-lg font-semibold">C-Cloud</span>
        </div>

        <!-- Heading -->
        <h2 class="text-2xl font-bold text-center mb-6">Create an account</h2>

        <!-- Dynamic Social Login Buttons -->
        <div th:if="${anySocialLoginEnabled}" class="space-y-3">
            <!-- Google Login Button -->
            <a th:if="${socialLoginFlags.google}"
               href="#"
               class="w-full flex items-center justify-center gap-2 py-2 bg-gray-200 rounded-md hover:bg-gray-300 transition">
                <img src="https://www.svgrepo.com/show/475656/google-color.svg" class="h-5 w-5" alt="Google"/>
                Sign in with Google
            </a>

            <!-- Apple Login Button -->
            <a th:if="${socialLoginFlags.apple}"
               href="#"
               class="w-full flex items-center justify-center gap-2 py-2 bg-gray-200 rounded-md hover:bg-gray-300 transition">
                <img src="https://www.svgrepo.com/show/349398/apple.svg" class="h-5 w-5" alt="Apple"/>
                Sign in with Apple
            </a>

            <!-- GitHub Login Button -->
            <a th:if="${socialLoginFlags.github}"
               href="#"
               class="w-full flex items-center justify-center gap-2 py-2 bg-gray-200 rounded-md hover:bg-gray-300 transition">
                <img src="https://www.svgrepo.com/show/512317/github-142.svg" class="h-5 w-5" alt="GitHub"/>
                Sign in with GitHub
            </a>
        </div>

        <!-- Dynamic Divider - Only show if there are social login buttons -->
        <div th:if="${anySocialLoginEnabled}" class="flex items-center my-6">
            <div class="flex-grow border-t border-gray-300"></div>
            <span class="px-3 text-gray-500 text-sm">Or continue with</span>
            <div class="flex-grow border-t border-gray-300"></div>
        </div>

        <!-- Error Alert -->
        <div th:if="${error != null}"
             class="bg-red-600 text-white text-sm px-4 py-2 rounded mb-4">
            <span th:text="${error}"></span>
        </div>

        <!-- Form -->
        <form th:action="@{/register}" method="post" th:object="${user}" class="space-y-4">
            <input type="text" th:field="*{fullName}" placeholder="Name" autocomplete="name"
                   class="w-full px-4 py-3 rounded-md bg-gray-100 border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 outline-none"/>

            <input type="email" th:field="*{email}" placeholder="Email" autocomplete="email"
                   class="w-full px-4 py-3 rounded-md bg-gray-100 border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 outline-none"/>

            <input type="password" th:field="*{password}" placeholder="Password" autocomplete="new-password"
                   class="w-full px-4 py-3 rounded-md bg-gray-100 border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 outline-none"/>

            <input type="password" th:field="*{confirmPassword}" placeholder="Confirm Password" autocomplete="new-password"
                   class="w-full px-4 py-3 rounded-md bg-gray-100 border border-gray-300 text-gray-900 focus:ring-2 focus:ring-blue-500 outline-none"/>

            <input type="hidden" id="fingerprint" name="fingerprint" th:field="*{fingerprint}" />

            <button type="submit"
                    class="w-full py-3 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 transition">
                Create Account
            </button>
        </form>

        <!-- Already have an account -->
        <p class="mt-6 text-center text-gray-600 text-sm">
            Already have an account?
            <a th:href="@{/login}" class="text-blue-500 hover:underline">Log in</a>
        </p>
    </div>
</div>

<!-- Footer Note -->
<div class="py-4 text-center text-gray-500 text-xs w-full">
    By signing up, you agree to our
    <a href="#" class="hover:underline">Terms of Service</a> and
    <a href="#" class="hover:underline">Privacy Policy</a>. <br>
    Â© 2025 C-Cloud. All rights reserved.
</div>

<!-- Theme Switcher -->
<button onclick="toggleTheme()"
        class="theme-toggle fixed bottom-4 right-4 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white w-10 h-10 rounded-md shadow flex items-center justify-center">
    <span id="theme-icon"></span>
</button>

<script src="/js/fingerprint.min.js"></script>
<script>
    const fpPromise = FingerprintJS.load();
    fpPromise
        .then(fp => fp.get())
        .then(result => {
            document.getElementById("fingerprint").value = result.visitorId;
        })
        .catch(() => {});
</script>

<!-- Your Theme Script -->
<script th:src="@{/js/theme.js}"></script>
</body>
</html>